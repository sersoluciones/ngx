<div class="list-filter" #searchInput (click)="toggleDropdown($event)">

    <span class="material-icons icon-search">search</span>

    <div class="label" [ngClass]="{active: labelActive}">{{ label }}</div>

    <input class="c-input not-styled" type="text" [formControl]="search">

    <span [hidden]="!hasValue(filter)" (click)="clearSearch()" class="material-icons icon-clear">cancel</span>

    <div class="controls">

        <!-- <button type="button" *ngIf="settings.clearAll && !isDisabled && selectedItems?.length > 0" class="clear-all" (click)="clearSelection($event);">
            <span class="material-icons">close</span>
        </button> -->

        <span class="material-icons chevron" [ngClass]="{'rotate': isActive}">keyboard_arrow_down</span>
    </div>

</div>

<div class="selected-list" #selectedList [attr.tabindex]="0">

    <div class="values">

        <ng-container *ngIf="hasValue(selectedItems)">

            <div class="token-list">
                <div class="token" *ngFor="let item of selectedItems;trackBy: trackByFn.bind(this);let k = index">
                    <ng-container>

                        <span *ngIf="!hasValue(badgeTempl)" class="label">{{ item[settings.labelKey] }}</span>
                        <span *ngIf="hasValue(badgeTempl)" class="label">
                            <ng-container *ngTemplateOutlet="badgeTempl.template; context:{item: item}"></ng-container>
                        </span>

                        <span class="remove" (click)="onItemClick(item);$event.stopPropagation()">
                            <span class="material-icons">close</span>
                        </span>
                    </ng-container>
                </div>
            </div>

        </ng-container>
    </div>
</div>

<div #dropdownList class="dropdown-list">

    <div class="pure-checkbox select-all" *ngIf="settings.enableCheckAll && data?.length > 0 && !isDisabledItemPresent" (click)="toggleSelectAll()">
        <input type="checkbox" [checked]="isSelectAll" />
        <label>
            <span [hidden]="isSelectAll">{{ settings.selectAllText }}</span>
            <span [hidden]="!isSelectAll">{{ settings.unSelectAllText }}</span>
        </label>
    </div>

    <div class="list" [style.maxHeight]="settings.maxHeight+'px'">

        <ng-container *ngIf="!hasValue(itemTempl)">
            <ng-container *ngFor="let item of filteredList; let i = index;">
                <div class="item pure-checkbox"  *ngIf="!isSelected(item)" (click)="onItemClick(item)">
                    {{ item[settings.labelKey] }}
                </div>
            </ng-container>
        </ng-container>

        <ng-container *ngIf="hasValue(itemTempl)">
            <ng-container *ngFor="let item of filteredList; let i = index;">
                <div class="item pure-checkbox" *ngIf="!isSelected(item)" (click)="onItemClick(item)">
                    <ng-container *ngTemplateOutlet="itemTempl.template; context:{item: item}"></ng-container>
                </div>
            </ng-container>
        </ng-container>

    </div>

    <h5 class="list-message" *ngIf="!hasValue(data)">{{ settings.noDataLabel }}</h5>

</div>
